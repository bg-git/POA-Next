{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/POA%20Next/apps/storefront/src/lib/shopify.ts"],"sourcesContent":["const domain = process.env.SHOPIFY_STORE_DOMAIN!;\r\nconst token = process.env.SHOPIFY_STOREFRONT_ACCESS_TOKEN!;\r\n\r\nexport async function shopifyFetch({\r\n  query,\r\n  variables = {},\r\n}: { query: string; variables?: Record<string, unknown> }) {\r\n  try {\r\n    const res = await fetch(`https://${domain}/api/2024-04/graphql.json`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'X-Shopify-Storefront-Access-Token': token,\r\n      },\r\n      body: JSON.stringify({ query, variables }),\r\n    });\r\n\r\n    if (!res.ok) {\r\n      throw new Error(`Shopify API error: ${res.status} ${res.statusText}`);\r\n    }\r\n\r\n    const json = await res.json();\r\n    if (json.errors) throw new Error(JSON.stringify(json.errors));\r\n    return json.data;\r\n  } catch (error) {\r\n    throw new Error(\r\n      `Shopify fetch failed: ${\r\n        error instanceof Error ? error.message : String(error)\r\n      }`,\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA,MAAM,SAAS,QAAQ,GAAG,CAAC,oBAAoB;AAC/C,MAAM,QAAQ,QAAQ,GAAG,CAAC,+BAA+B;AAElD,eAAe,aAAa,EACjC,KAAK,EACL,YAAY,CAAC,CAAC,EACyC;IACvD,IAAI;QACF,MAAM,MAAM,MAAM,MAAM,CAAC,QAAQ,EAAE,OAAO,yBAAyB,CAAC,EAAE;YACpE,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,qCAAqC;YACvC;YACA,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAO;YAAU;QAC1C;QAEA,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,MAAM,IAAI,MAAM,CAAC,mBAAmB,EAAE,IAAI,MAAM,CAAC,CAAC,EAAE,IAAI,UAAU,EAAE;QACtE;QAEA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,IAAI,KAAK,MAAM,EAAE,MAAM,IAAI,MAAM,KAAK,SAAS,CAAC,KAAK,MAAM;QAC3D,OAAO,KAAK,IAAI;IAClB,EAAE,OAAO,OAAO;QACd,MAAM,IAAI,MACR,CAAC,sBAAsB,EACrB,iBAAiB,QAAQ,MAAM,OAAO,GAAG,OAAO,QAChD;IAEN;AACF"}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/POA%20Next/apps/storefront/src/components/Seo.tsx"],"sourcesContent":["import Head from 'next/head';\r\n\r\ntype SeoSchemaData = {\r\n  headline?: string;\r\n  description?: string;\r\n  datePublished?: string;\r\n  dateModified?: string;\r\n  slug?: string;\r\n  region?: string;\r\n  canonicalBase?: string;\r\n};\r\n\r\ntype SeoOrganizationData = {\r\n  name: string;\r\n  description: string;\r\n  url: string;\r\n  logo?: string;\r\n  sameAs?: string[];\r\n  areaServed?: string[];\r\n  knowsAbout?: string[];\r\n};\r\n\r\ntype SeoProps = {\r\n  title: string;\r\n  description?: string;\r\n  canonical?: string;\r\n  schemaType?: 'TechArticle' | 'WebPage' | 'Organization';\r\n  schemaData?: SeoSchemaData | SeoOrganizationData;\r\n};\r\n\r\nexport default function Seo({ title, description, canonical, schemaType = 'WebPage', schemaData }: SeoProps) {\r\n  const schema = schemaData && schemaType === 'TechArticle' ? {\r\n    \"@context\": \"https://schema.org\",\r\n    \"@type\": \"TechArticle\",\r\n    \"@id\": `${(schemaData as SeoSchemaData).canonicalBase}/quality-assurance/${(schemaData as SeoSchemaData).slug}#article`,\r\n    \"headline\": (schemaData as SeoSchemaData).headline,\r\n    \"description\": (schemaData as SeoSchemaData).description,\r\n    \"mainEntityOfPage\": `${(schemaData as SeoSchemaData).canonicalBase}/quality-assurance/${(schemaData as SeoSchemaData).slug}`,\r\n    \"datePublished\": (schemaData as SeoSchemaData).datePublished,\r\n    \"dateModified\": (schemaData as SeoSchemaData).dateModified,\r\n    \"inLanguage\": (schemaData as SeoSchemaData).region === 'us' ? \"en-US\" : \"en-GB\",\r\n    \"keywords\": \"body piercing jewellery, compliance, UK, EU, ASTM standards\",\r\n    \"author\": {\r\n      \"@type\": \"Organization\",\r\n      \"name\": \"PIERCE OF ART\",\r\n      \"url\": \"https://www.pierceofart.co.uk\"\r\n    },\r\n    \"publisher\": {\r\n      \"@type\": \"Organization\",\r\n      \"name\": \"PIERCE OF ART\",\r\n      \"url\": \"https://www.pierceofart.co.uk\"\r\n    },\r\n    \"isPartOf\": {\r\n      \"@type\": \"WebSite\",\r\n      \"name\": \"PIERCE OF ART\",\r\n      \"url\": \"https://www.pierceofart.co.uk\"\r\n    }\r\n  } : schemaData && schemaType === 'Organization' ? {\r\n    \"@context\": \"https://schema.org\",\r\n    \"@type\": \"LocalBusiness\",\r\n    \"name\": (schemaData as SeoOrganizationData).name,\r\n    \"description\": (schemaData as SeoOrganizationData).description,\r\n    \"url\": (schemaData as SeoOrganizationData).url,\r\n    \"logo\": (schemaData as SeoOrganizationData).logo || \"https://www.pierceofart.co.uk/auricle-logo.png\",\r\n    \"image\": (schemaData as SeoOrganizationData).logo || \"https://www.pierceofart.co.uk/auricle-logo.png\",\r\n    \"areaServed\": (schemaData as SeoOrganizationData).areaServed || [\"GB\", \"EU\"],\r\n    \"knowsAbout\": (schemaData as SeoOrganizationData).knowsAbout || [\r\n      \"Body Piercing Jewellery\",\r\n      \"ASTM F136 Titanium\",\r\n      \"ASTM F2923\",\r\n      \"ASTM F2999\",\r\n      \"EU Nickel Release Compliance\",\r\n      \"Professional Body Piercing\",\r\n      \"Jewellery Safety\",\r\n      \"Material Certification\"\r\n    ],\r\n    \"sameAs\": (schemaData as SeoOrganizationData).sameAs || [],\r\n    \"founder\": {\r\n      \"@type\": \"Person\",\r\n      \"name\": \"PIERCE OF ART Team\"\r\n    },\r\n    \"address\": {\r\n      \"@type\": \"PostalAddress\",\r\n      \"addressCountry\": \"GB\"\r\n    },\r\n    \"priceRange\": \"¬£\",\r\n    \"contactPoint\": {\r\n      \"@type\": \"ContactPoint\",\r\n      \"contactType\": \"Customer Support\",\r\n      \"email\": \"info@pierceofart.co.uk\"\r\n    }\r\n  } : null;\r\n\r\n  return (\r\n    <Head>\r\n      <title>{`${title} | PIERCE OF ART`}</title>\r\n      {description && <meta name=\"description\" content={description} />}\r\n      {canonical && <link rel=\"canonical\" href={canonical} />}\r\n      {schema && (\r\n        <script\r\n          type=\"application/ld+json\"\r\n          dangerouslySetInnerHTML={{ __html: JSON.stringify(schema) }}\r\n        />\r\n      )}\r\n    </Head>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;AA8Be,SAAS,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,SAAS,EAAE,aAAa,SAAS,EAAE,UAAU,EAAY;IACzG,MAAM,SAAS,cAAc,eAAe,gBAAgB;QAC1D,YAAY;QACZ,SAAS;QACT,OAAO,GAAG,AAAC,WAA6B,aAAa,CAAC,mBAAmB,EAAE,AAAC,WAA6B,IAAI,CAAC,QAAQ,CAAC;QACvH,YAAY,AAAC,WAA6B,QAAQ;QAClD,eAAe,AAAC,WAA6B,WAAW;QACxD,oBAAoB,GAAG,AAAC,WAA6B,aAAa,CAAC,mBAAmB,EAAE,AAAC,WAA6B,IAAI,EAAE;QAC5H,iBAAiB,AAAC,WAA6B,aAAa;QAC5D,gBAAgB,AAAC,WAA6B,YAAY;QAC1D,cAAc,AAAC,WAA6B,MAAM,KAAK,OAAO,UAAU;QACxE,YAAY;QACZ,UAAU;YACR,SAAS;YACT,QAAQ;YACR,OAAO;QACT;QACA,aAAa;YACX,SAAS;YACT,QAAQ;YACR,OAAO;QACT;QACA,YAAY;YACV,SAAS;YACT,QAAQ;YACR,OAAO;QACT;IACF,IAAI,cAAc,eAAe,iBAAiB;QAChD,YAAY;QACZ,SAAS;QACT,QAAQ,AAAC,WAAmC,IAAI;QAChD,eAAe,AAAC,WAAmC,WAAW;QAC9D,OAAO,AAAC,WAAmC,GAAG;QAC9C,QAAQ,AAAC,WAAmC,IAAI,IAAI;QACpD,SAAS,AAAC,WAAmC,IAAI,IAAI;QACrD,cAAc,AAAC,WAAmC,UAAU,IAAI;YAAC;YAAM;SAAK;QAC5E,cAAc,AAAC,WAAmC,UAAU,IAAI;YAC9D;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD,UAAU,AAAC,WAAmC,MAAM,IAAI,EAAE;QAC1D,WAAW;YACT,SAAS;YACT,QAAQ;QACV;QACA,WAAW;YACT,SAAS;YACT,kBAAkB;QACpB;QACA,cAAc;QACd,gBAAgB;YACd,SAAS;YACT,eAAe;YACf,SAAS;QACX;IACF,IAAI;IAEJ,qBACE,qKAAC,gIAAI;;0BACH,qKAAC;0BAAO,GAAG,MAAM,gBAAgB,CAAC;;;;;;YACjC,6BAAe,qKAAC;gBAAK,MAAK;gBAAc,SAAS;;;;;;YACjD,2BAAa,qKAAC;gBAAK,KAAI;gBAAY,MAAM;;;;;;YACzC,wBACC,qKAAC;gBACC,MAAK;gBACL,yBAAyB;oBAAE,QAAQ,KAAK,SAAS,CAAC;gBAAQ;;;;;;;;;;;;AAKpE"}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file:///C:/POA%20Next/apps/storefront/src/lib/mapStyledByYou.ts"],"sourcesContent":["// src/lib/mapStyledByYou.ts\r\nimport type { UGCItem } from \"@/components/StyledByYou\";\r\n\r\ntype ImageObj = {\r\n  url: string;\r\n  width: number;\r\n  height: number;\r\n  altText?: string | null;\r\n};\r\n\r\ntype MediaImageRef = { __typename: \"MediaImage\"; image: ImageObj };\r\ntype ProductRef = { __typename: \"Product\"; id: string };\r\ntype Reference = MediaImageRef | ProductRef | { __typename?: string } | null | undefined;\r\n\r\nexport interface MetaobjectField {\r\n  key: string;\r\n  value?: string | null;\r\n  reference?: Reference;\r\n}\r\n\r\nexport interface MetaobjectNode {\r\n  id: string;\r\n  fields: MetaobjectField[];\r\n}\r\n\r\nexport interface MetaobjectEdge {\r\n  node: MetaobjectNode;\r\n}\r\n\r\nconst norm = (s: string): string => s.toLowerCase().replace(/[^a-z0-9]/g, \"\");\r\nconst match = (k: string, target: string): boolean => norm(k).endsWith(norm(target));\r\n\r\nconst isMediaImageRef = (ref?: Reference): ref is MediaImageRef =>\r\n  !!ref && (ref as { __typename?: string }).__typename === \"MediaImage\";\r\n\r\nconst isProductRef = (ref?: Reference): ref is ProductRef =>\r\n  !!ref && (ref as { __typename?: string }).__typename === \"Product\";\r\n\r\nexport function mapStyledByYou(\r\n  edges: MetaobjectEdge[],\r\n  productId?: string\r\n): UGCItem[] {\r\n  if (!Array.isArray(edges)) return [];\r\n\r\n  return edges\r\n    .map((edge): UGCItem | null => {\r\n      const node = edge.node;\r\n\r\n      const pick = (t: string): MetaobjectField | undefined =>\r\n        node.fields.find((f) => match(f.key, t));\r\n\r\n      const imgRef = pick(\"image\")?.reference;\r\n      if (!isMediaImageRef(imgRef)) return null;\r\n\r\n      const productRef = pick(\"product\")?.reference;\r\n      const okForProduct =\r\n        !productRef || !productId || (isProductRef(productRef) && productRef.id === productId);\r\n      if (!okForProduct) return null;\r\n\r\n      const image = imgRef.image;\r\n\r\n      return {\r\n        id: node.id,\r\n        image,\r\n        alt: pick(\"alt\")?.value || image.altText || \"\",\r\n        credit: pick(\"credit\")?.value ?? undefined,\r\n        url: pick(\"url\")?.value ?? undefined,\r\n        linkText: pick(\"link_text\")?.value ?? undefined,\r\n      };\r\n    })\r\n    .filter((x): x is UGCItem => x !== null);\r\n}\r\n"],"names":[],"mappings":"AAAA,4BAA4B;;;;;AA6B5B,MAAM,OAAO,CAAC,IAAsB,EAAE,WAAW,GAAG,OAAO,CAAC,cAAc;AAC1E,MAAM,QAAQ,CAAC,GAAW,SAA4B,KAAK,GAAG,QAAQ,CAAC,KAAK;AAE5E,MAAM,kBAAkB,CAAC,MACvB,CAAC,CAAC,OAAO,AAAC,IAAgC,UAAU,KAAK;AAE3D,MAAM,eAAe,CAAC,MACpB,CAAC,CAAC,OAAO,AAAC,IAAgC,UAAU,KAAK;AAEpD,SAAS,eACd,KAAuB,EACvB,SAAkB;IAElB,IAAI,CAAC,MAAM,OAAO,CAAC,QAAQ,OAAO,EAAE;IAEpC,OAAO,MACJ,GAAG,CAAC,CAAC;QACJ,MAAM,OAAO,KAAK,IAAI;QAEtB,MAAM,OAAO,CAAC,IACZ,KAAK,MAAM,CAAC,IAAI,CAAC,CAAC,IAAM,MAAM,EAAE,GAAG,EAAE;QAEvC,MAAM,SAAS,KAAK,UAAU;QAC9B,IAAI,CAAC,gBAAgB,SAAS,OAAO;QAErC,MAAM,aAAa,KAAK,YAAY;QACpC,MAAM,eACJ,CAAC,cAAc,CAAC,aAAc,aAAa,eAAe,WAAW,EAAE,KAAK;QAC9E,IAAI,CAAC,cAAc,OAAO;QAE1B,MAAM,QAAQ,OAAO,KAAK;QAE1B,OAAO;YACL,IAAI,KAAK,EAAE;YACX;YACA,KAAK,KAAK,QAAQ,SAAS,MAAM,OAAO,IAAI;YAC5C,QAAQ,KAAK,WAAW,SAAS;YACjC,KAAK,KAAK,QAAQ,SAAS;YAC3B,UAAU,KAAK,cAAc,SAAS;QACxC;IACF,GACC,MAAM,CAAC,CAAC,IAAoB,MAAM;AACvC"}},
    {"offset": {"line": 196, "column": 0}, "map": {"version":3,"sources":["file:///C:/POA%20Next/apps/storefront/src/components/ProductGallery.tsx"],"sourcesContent":["// src/components/ProductGallery.tsx\r\nimport Image from \"next/image\";\r\nimport { useEffect, useMemo, useState, useRef } from \"react\";\r\n\r\nexport type GalleryImage = {\r\n  url: string;\r\n  width: number;\r\n  height: number;\r\n  alt?: string | null;\r\n  isUGC?: boolean;\r\n  credit?: string; // name from metaobject\r\n};\r\n\r\n/** Only render the gallery variant for the current viewport */\r\nfunction useIsDesktop() {\r\n  const [isDesktop, setIsDesktop] = useState(false);\r\n  useEffect(() => {\r\n    const mq = window.matchMedia(\"(min-width: 769px)\");\r\n    const onChange = () => setIsDesktop(mq.matches);\r\n    onChange();\r\n    mq.addEventListener(\"change\", onChange);\r\n    return () => mq.removeEventListener(\"change\", onChange);\r\n  }, []);\r\n  return isDesktop;\r\n}\r\n\r\nexport default function ProductGallery({\r\n  images,\r\n  defaultActive = 0,\r\n}: {\r\n  images: GalleryImage[];\r\n  defaultActive?: number;\r\n}) {\r\n  const [active, setActive] = useState(defaultActive);\r\n  const [heroIndex, setHeroIndex] = useState(defaultActive);\r\n  const isDesktop = useIsDesktop();\r\n  const snapRowRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  const safeImages = useMemo(() => (images || []).filter(Boolean), [images]);\r\n\r\n  // Keep active in sync if images or requested default changes\r\n  useEffect(() => {\r\n    setActive(defaultActive);\r\n    setHeroIndex(defaultActive);\r\n  }, [images, defaultActive]);\r\n\r\n  // Track the last non-UGC image that was active (hero image)\r\n  useEffect(() => {\r\n    if (!safeImages[active]?.isUGC) setHeroIndex(active);\r\n  }, [active, safeImages]);\r\n\r\n  // Thumbnails: hero + UGC images (if any UGC exists)\r\n  const thumbs = useMemo(() => {\r\n    if (!safeImages.some((img) => img.isUGC)) return [];\r\n    return [\r\n      { img: safeImages[0], i: 0 },\r\n      ...safeImages\r\n        .map((img, i) => ({ img, i }))\r\n        .filter(({ img, i }) => i > 0 && img.isUGC),\r\n    ];\r\n  }, [safeImages]);\r\n\r\n  // Mobile: active hero + all UGC images\r\n  const mobileImages = useMemo(() => {\r\n    const imgs: { img: GalleryImage; i: number }[] = [];\r\n    if (safeImages[heroIndex]) imgs.push({ img: safeImages[heroIndex], i: heroIndex });\r\n    safeImages.forEach((img, i) => {\r\n      if (img.isUGC && i !== heroIndex) imgs.push({ img, i });\r\n    });\r\n    return imgs;\r\n  }, [safeImages, heroIndex]);\r\n\r\n  // Scroll the mobile carousel when the active index changes (e.g. variant switch)\r\n  useEffect(() => {\r\n    if (isDesktop) return;\r\n    const el = snapRowRef.current;\r\n    if (!el) return;\r\n    const slideIndex = mobileImages.findIndex(({ i }) => i === active);\r\n    const target = el.offsetWidth * Math.max(slideIndex, 0);\r\n    if (Math.abs(el.scrollLeft - target) < 1) return;\r\n    el.scrollTo({ left: target });\r\n  }, [active, isDesktop, mobileImages]);\r\n\r\n  if (!safeImages.length) return null;\r\n\r\n  const main = safeImages[Math.min(active, safeImages.length - 1)];\r\n  let thumbIndex = 0;\r\n\r\n  return (\r\n    <div>\r\n      {isDesktop ? (\r\n        /* DESKTOP: main image + overlayed thumbnail strip (bottom-left) */\r\n        <div className=\"gallery-desktop\">\r\n          <div className=\"img-wrap\">\r\n            {main.isUGC && (\r\n              <div className=\"badges\">\r\n                <span className=\"badge-ugc\">Styled by you</span>\r\n                {main.credit && (\r\n                  <span className=\"badge-credit\">Image provided by {main.credit}</span>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            <Image\r\n              key={main.url}\r\n              src={main.url}\r\n              alt={main.alt || \"\"}\r\n              width={main.width}\r\n              height={main.height}\r\n              priority={true}\r\n              fetchPriority=\"high\"\r\n              loading=\"eager\"\r\n              sizes=\"(min-width:1024px) calc((min(1400px,100vw) - 32px - 24px)/2), 100vw\"\r\n              style={{ width: \"100%\", height: \"auto\", objectFit: \"cover\", display: \"block\" }}\r\n            />\r\n\r\n            {thumbs.length > 0 && (\r\n              <div\r\n                className=\"thumbs-overlay\"\r\n                role=\"group\"\r\n                aria-label=\"Product thumbnails\"\r\n              >\r\n                {thumbs.map(({ img, i }) => {\r\n                  thumbIndex += 1;\r\n                  return (\r\n                    <button\r\n                      key={img.url + i}\r\n                      aria-label={`Show image ${thumbIndex}`}\r\n                      className={`thumb ${i === active ? \"is-active\" : \"\"}`}\r\n                      onClick={() => setActive(i)}\r\n                      type=\"button\"\r\n                    >\r\n                      <div className=\"thumb-frame\">\r\n                        <Image\r\n                          src={img.url}\r\n                          alt=\"\"\r\n                          width={60}\r\n                          height={75}\r\n                          loading=\"lazy\"\r\n                          decoding=\"async\"\r\n                          fetchPriority=\"low\"\r\n                          sizes=\"60px\"\r\n                          quality={40}\r\n                        />\r\n                      </div>\r\n                    </button>\r\n                  );\r\n                })}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        /* MOBILE: swipe-only (scroll-snap), with dots */\r\n        <div className=\"gallery-mobile\" aria-label=\"Product images\">\r\n          <div\r\n            className=\"snap-row\"\r\n            ref={snapRowRef}\r\n            onScroll={(e) => {\r\n              const idx = Math.round(\r\n                e.currentTarget.scrollLeft / e.currentTarget.offsetWidth\r\n              );\r\n              const safeIdx = mobileImages[idx]?.i ?? 0;\r\n              setActive(safeIdx);\r\n            }}\r\n          >\r\n            {mobileImages.map(({ img, i }, mIdx) => (\r\n              <div className=\"snap-card\" key={img.url + i}>\r\n                {img.isUGC && (\r\n                  <div className=\"badges\">\r\n                    <span className=\"badge-ugc\">Styled by you</span>\r\n                    {img.credit && (\r\n                      <span className=\"badge-credit\">Image provided by {img.credit}</span>\r\n                    )}\r\n                  </div>\r\n                )}\r\n                <Image\r\n                  src={img.url}\r\n                  alt={img.alt || \"\"}\r\n                  width={img.width}\r\n                  height={img.height}\r\n                  priority={mIdx === 0}\r\n                  fetchPriority={mIdx === 0 ? \"high\" : \"low\"}\r\n                  loading={mIdx === 0 ? \"eager\" : \"lazy\"}\r\n                  decoding=\"async\"\r\n                  sizes=\"100vw\"\r\n                  style={{ width: \"100%\", height: \"auto\", objectFit: \"cover\", display: \"block\" }}\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n          {mobileImages.length > 1 && (\r\n            <div className=\"dots\">\r\n              {mobileImages.map(({ i }, idx) => (\r\n                <div key={idx} className={`dot ${i === active ? \"is-active\" : \"\"}`} />\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      <style jsx>{`\r\n        .img-wrap { position: relative; width: 100%; }\r\n\r\n        /* Stacked badges (top-left) */\r\n        .badges {\r\n          position: absolute;\r\n          left: 8px;\r\n          top: 8px;\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 4px;\r\n          z-index: 2;\r\n          pointer-events: none;\r\n        }\r\n        .badge-ugc,\r\n        .badge-credit {\r\n          display: inline-block;\r\n          background: #181818;\r\n          color: #fff;\r\n          border: 1px solid #181818;\r\n          font-size: 11px;\r\n          line-height: 1;\r\n          padding: 6px 8px;\r\n          white-space: nowrap;\r\n          max-width: max-content;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n        }\r\n\r\n        /* Overlayed horizontal thumbs on the LEFT (desktop) */\r\n        .thumbs-overlay {\r\n          position: absolute;\r\n          left: 12px;\r\n          bottom: 12px;\r\n          display: flex;\r\n          gap: 8px;\r\n          padding: 6px;\r\n          border-radius: 8px;\r\n          background: rgba(255, 255, 255, 0.6);\r\n          backdrop-filter: blur(4px);\r\n          -webkit-backdrop-filter: blur(4px);\r\n          z-index: 1;\r\n        }\r\n        .thumb { border: 0; padding: 0; background: transparent; cursor: pointer; }\r\n        .thumb-frame {\r\n          position: relative;\r\n          width: 60px; height: 75px; /* 4:5 */\r\n          overflow: hidden;\r\n          border: 1px solid #e5e5e5;\r\n        }\r\n        .thumb.is-active .thumb-frame { outline: 2px solid #181818; outline-offset: -2px; }\r\n\r\n        /* Mobile swipe-only */\r\n        .gallery-mobile { position: relative; }\r\n        .snap-row {\r\n          display: flex;\r\n          overflow-x: auto;\r\n          scroll-snap-type: x mandatory;\r\n          -webkit-overflow-scrolling: touch;\r\n          gap: 8px;\r\n        }\r\n        .snap-card {\r\n          min-width: 100%;\r\n          scroll-snap-align: start;\r\n          aspect-ratio: 4 / 5;\r\n          position: relative;\r\n        }\r\n\r\n        /* Mobile dots */\r\n        .dots {\r\n          position: absolute;\r\n          bottom: 8px;\r\n          left: 50%;\r\n          transform: translateX(-50%);\r\n          display: flex;\r\n          gap: 6px;\r\n        }\r\n        .dot {\r\n          width: 6px;\r\n          height: 6px;\r\n          border-radius: 50%;\r\n          background: rgba(24, 24, 24, 0.25);\r\n        }\r\n        .dot.is-active { background: #181818; }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 516, "column": 0}, "map": {"version":3,"sources":["file:///C:/POA%20Next/apps/storefront/src/pages/products/%5Bhandle%5D.tsx"],"sourcesContent":["import type {\r\n  GetStaticProps,\r\n  GetStaticPaths,\r\n  GetStaticPropsContext,\r\n} from 'next';\r\nimport { shopifyFetch } from '@/lib/shopify';\r\nimport { useCart } from '@/context/CartContext';\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { useRouter } from 'next/router';\r\nimport Seo from '@/components/Seo';\r\nimport Link from 'next/link';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useToast } from '@/context/ToastContext';\r\nimport { useMemo } from 'react';\r\nimport { mapStyledByYou } from \"@/lib/mapStyledByYou\";\r\nimport type { UGCItem } from \"@/components/StyledByYou\";\r\nimport ProductGallery from \"@/components/ProductGallery\";\r\nimport dynamic from 'next/dynamic';\r\n\r\n// ‚úÖ Lazy-loaded, non-critical UI\r\nconst StyledByYouLazy = dynamic(() => import('@/components/StyledByYou'), {\r\n  ssr: false,\r\n  loading: () => null,\r\n});\r\nconst FavouriteToggleLazy = dynamic(() => import('@/components/FavouriteToggle'), {\r\n  ssr: false,\r\n  loading: () => null,\r\n});\r\n\r\n// TYPES\r\ninterface Metafield {\r\n  key: string;\r\n  value: string;\r\n}\r\n\r\ninterface ProductVariantNode {\r\n  id: string;\r\n  title: string;\r\n  price: {\r\n    amount: string;\r\n  };\r\n  availableForSale: boolean;\r\n  quantityAvailable: number;\r\n  selectedOptions: {\r\n    name: string;\r\n    value: string;\r\n  }[];\r\n  image?: {\r\n    url: string;\r\n    width: number;\r\n    height: number;\r\n    altText: string | null;\r\n  } | null;\r\n  sku: string;\r\n}\r\n\r\ninterface Product {\r\n  id: string;\r\n  title: string;\r\n  handle: string;\r\n  descriptionHtml: string;\r\n  priceRange: {\r\n    minVariantPrice: {\r\n      amount: string;\r\n    };\r\n  };\r\n  images: {\r\n    edges: {\r\n      node: {\r\n        url: string;\r\n        altText: string | null;\r\n        width: number;\r\n        height: number;\r\n      };\r\n    }[];\r\n  };\r\n  variants: {\r\n    edges: {\r\n      node: ProductVariantNode;\r\n    }[];\r\n  };\r\n  metafields: Metafield[];\r\n}\r\ninterface ProductPageProps {\r\n  product: Product;\r\n  ugcItems: UGCItem[];\r\n}\r\n\r\ntype GalleryImage = {\r\n  url: string;\r\n  width: number;\r\n  height: number;\r\n  alt?: string | null;\r\n  isUGC?: boolean;\r\n  credit?: string;\r\n};\r\n\r\nexport default function ProductPage({ product, ugcItems }: ProductPageProps) {\r\n\r\n  const { addToCart, openDrawer } = useCart();\r\n  const { showToast } = useToast();\r\n  const router = useRouter();\r\n\r\n  \r\n  const [selectedVariantId, setSelectedVariantId] = useState<string | null>(null);\r\n  const [showVariantImage, setShowVariantImage] = useState(false);\r\n  const [qty, setQty] = useState(0);\r\n\r\n  const variantEdges = useMemo(() => product?.variants?.edges || [], [product]);\r\n  const defaultVariant = useMemo<ProductVariantNode | null>(() => {\r\n  const nodes = (variantEdges || []).map(v => v.node);\r\n  if (nodes.length === 0) return null;\r\n\r\n  // Prefer first in-stock variant; otherwise fall back to the first variant\r\n  const firstInStock = nodes.find(\r\n    v => v.availableForSale && (v.quantityAvailable ?? 0) > 0\r\n  );\r\n  return firstInStock ?? nodes[0];\r\n}, [variantEdges]);\r\n\r\n\r\n  useEffect(() => {\r\n    if (!defaultVariant) {\r\n      setSelectedVariantId(null);\r\n      setQty(0);\r\n      return;\r\n    }\r\n    setSelectedVariantId(defaultVariant.id);\r\n    setShowVariantImage(false);\r\n    setQty(\r\n      defaultVariant.availableForSale && (defaultVariant.quantityAvailable ?? 0) > 0\r\n        ? 1\r\n        : 0\r\n    );\r\n  }, [router.asPath, product?.id, defaultVariant]);\r\n\r\n\r\n  const { user, refreshUser, loading } = useAuth();\r\n\r\n  useEffect(() => {\r\n    const v = variantEdges.find(e => e.node.id === selectedVariantId)?.node;\r\n    if (!v) return;\r\n    setQty((v.quantityAvailable ?? 0) > 0 ? 1 : 0);\r\n    if (!v.image) {\r\n      setShowVariantImage(false);\r\n    }\r\n  }, [selectedVariantId, variantEdges]);\r\n\r\n\r\n  const selectedVariant = product?.variants?.edges?.find(\r\n    v => v.node.id === selectedVariantId\r\n  )?.node;\r\n\r\n  // Build the combined gallery: official image first, optional variant image,\r\n  // then up to 2 ‚ÄúStyled By You‚Äù images\r\n  const galleryImages = useMemo<GalleryImage[]>(() => {\r\n    const official: GalleryImage[] =\r\n      (product.images?.edges || [])\r\n        .slice(0, 1)\r\n        .map(({ node }) => ({\r\n          url: node.url,\r\n          width: node.width,\r\n          height: node.height,\r\n          alt: node.altText || product.title,\r\n          isUGC: false,\r\n        }));\r\n\r\n    const variantImg: GalleryImage[] =\r\n      showVariantImage && selectedVariant?.image\r\n        ? [{\r\n            url: selectedVariant.image.url,\r\n            width: selectedVariant.image.width,\r\n            height: selectedVariant.image.height,\r\n            alt: selectedVariant.image.altText || product.title,\r\n            isUGC: false,\r\n          }]\r\n        : [];\r\n\r\n    const sby: GalleryImage[] = (ugcItems || []).slice(0, 2).map((it) => ({\r\n      url: it.image.url,\r\n      width: it.image.width,\r\n      height: it.image.height,\r\n      alt: it.alt || \"Styled by you\",\r\n      isUGC: true,\r\n      credit: it.credit || undefined,\r\n    }));\r\n\r\n    // De-dupe by base URL, preserving order\r\n    const seen = new Set<string>();\r\n    return [...official, ...variantImg, ...sby].filter((img) => {\r\n      const base = img.url.split(\"?\")[0];\r\n      if (seen.has(base)) return false;\r\n      seen.add(base);\r\n      return true;\r\n    });\r\n  }, [product.images, product.title, ugcItems, selectedVariant?.image, showVariantImage]);\r\n\r\n  const isSoldOut =\r\n    !selectedVariant?.availableForSale ||\r\n    selectedVariant?.quantityAvailable <= 0;\r\n\r\n  const maxQty = selectedVariant?.quantityAvailable ?? 9999;\r\n\r\n  const rawPrice = selectedVariant\r\n    ? parseFloat(selectedVariant.price.amount)\r\n    : parseFloat(product?.priceRange?.minVariantPrice?.amount || '0');\r\n  const formattedPrice = rawPrice % 1 === 0 ? rawPrice.toFixed(0) : rawPrice.toFixed(2);\r\n\r\n  const metafields = useMemo(\r\n    () => product?.metafields || [],\r\n    [product?.metafields]\r\n  );\r\n\r\n  const getFieldValue = (key: string): string | null => {\r\n    const field = metafields.find((f: Metafield) => f?.key === key);\r\n    if (!field?.value) return null;\r\n\r\n    const value = field.value.trim();\r\n    if (!value.startsWith('{') && !value.startsWith('[')) {\r\n      return value;\r\n    }\r\n\r\n    try {\r\n      const parsed = JSON.parse(value);\r\n      return Array.isArray(parsed) ? parsed.join(', ') : String(parsed);\r\n    } catch {\r\n      return value;\r\n    }\r\n  };\r\n\r\n  const selectedSku = selectedVariant?.sku || getFieldValue('sku');\r\n\r\n  const currentVariantLabel = getFieldValue('variant_label') || 'Select an option';\r\n  const rawVariants = getFieldValue('variants');\r\n\r\n  const variantOptions = rawVariants\r\n    ? rawVariants.split(',').map((entry: string) => {\r\n        const [label, url] = entry.trim().split('::');\r\n        return { label: label?.trim(), url: url?.trim() };\r\n      })\r\n    : [];\r\n\r\n  const cellLabelStyle = {\r\n    padding: '8px',\r\n    fontWeight: 500,\r\n    background: '#f9f9f9',\r\n    border: '1px solid #e0e0e0',\r\n    textTransform: 'uppercase' as const,\r\n    fontSize: '12px',\r\n    width: '40%',\r\n  };\r\n\r\n  const cellValueStyle = {\r\n    padding: '8px',\r\n    border: '1px solid #e0e0e0',\r\n    fontSize: '14px',\r\n    width: '60%',\r\n  };\r\n\r\n  const fieldLabels = {\r\n    title: 'Title',\r\n    name: 'Name',\r\n    sku: 'SKU',\r\n    metal: 'Metal',\r\n    alloy: 'Alloy',\r\n    metal_colour: 'Metal Colour',\r\n    thread_type: 'Thread Type',\r\n    fitting: 'Fitting',\r\n    gem_type: 'Gem Type',\r\n    gem_colour: 'Gem Colour',\r\n    gauge: 'Gauge',\r\n    base_size: 'Base Size',\r\n    length: 'Length',\r\n    width: 'Width',\r\n    height: 'Height',\r\n    sold_as: 'Sold As',\r\n    shipping: 'Shipping'\r\n  };\r\n\r\n\r\n\r\n\r\n  // ‚úÖ Viewport-gate \"Styled By You\"\r\n  const sbyAnchorRef = useRef<HTMLDivElement | null>(null);\r\n  const [showSBY, setShowSBY] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const el = sbyAnchorRef.current;\r\n    if (!el) return;\r\n    const io = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (entry.isIntersecting) {\r\n          setShowSBY(true);\r\n          io.disconnect();\r\n        }\r\n      },\r\n      { rootMargin: '300px' }\r\n    );\r\n    io.observe(el);\r\n    return () => io.disconnect();\r\n  }, []);\r\n\r\n  // ‚úÖ Idle-load FavouriteToggle (with proper typing from src/types/idle-callback.d.ts)\r\n  const [showFav, setShowFav] = useState(false);\r\n  useEffect(() => {\r\n    let cancel: (() => void) | undefined;\r\n\r\n    if (typeof window !== 'undefined' && typeof window.requestIdleCallback === 'function') {\r\n      const id = window.requestIdleCallback(() => setShowFav(true));\r\n      cancel = () => {\r\n        if (typeof window.cancelIdleCallback === 'function') {\r\n          window.cancelIdleCallback(id as number);\r\n        }\r\n      };\r\n    } else {\r\n      const t = window.setTimeout(() => setShowFav(true), 300);\r\n      cancel = () => window.clearTimeout(t);\r\n    }\r\n\r\n    return () => { if (cancel) cancel(); };\r\n  }, []);\r\n\r\n  if (!product) {\r\n    return <div style={{ padding: '16px' }}>Product not found.</div>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Seo\r\n        title={getFieldValue('title') || product.title}\r\n        description={\r\n          getFieldValue('description') || `Buy ${product.title} in 14k gold or titanium.`\r\n        }\r\n        canonical={`https://www.pierceofart.co.uk/item/${product.handle}`}\r\n      />\r\n\r\n      <script\r\n        type=\"application/ld+json\"\r\n        dangerouslySetInnerHTML={{\r\n          __html: JSON.stringify({\r\n            \"@context\": \"https://schema.org\",\r\n            \"@type\": \"Product\",\r\n            \"name\": product.title,\r\n            \"image\": product.images?.edges?.map(img => img?.node?.url).filter(Boolean),\r\n            \"description\":\r\n              product.metafields?.find((m) => m?.key === \"description\")?.value || \"\",\r\n            \"sku\": product.metafields?.find((m) => m?.key === \"sku\")?.value || \"\",\r\n            \"brand\": {\r\n              \"@type\": \"Brand\",\r\n              \"name\": \"PIERCE OF ART\"\r\n            },\r\n            \"offers\": {\r\n              \"@type\": \"Offer\",\r\n              \"url\": `https://www.pierceofart.co.uk/item/${product.handle}`,\r\n              \"priceCurrency\": \"GBP\",\r\n              \"price\": \"0.01\",\r\n              \"availability\": \"https://schema.org/InStock\",\r\n              \"priceSpecification\": {\r\n                \"@type\": \"UnitPriceSpecification\",\r\n                \"priceCurrency\": \"GBP\",\r\n                \"price\": \"0.01\"\r\n              }\r\n            }\r\n          })\r\n        }}\r\n      />\r\n\r\n      <main style={{ maxWidth: '1400px', margin: '0 auto', padding: '16px' }}>\r\n        <div className=\"product-layout\">\r\n          <div className=\"product-image\" style={{ position: 'relative' }}>\r\n            <ProductGallery\r\n              images={galleryImages}\r\n              defaultActive={showVariantImage ? 1 : 0}\r\n            />\r\n\r\n            <div className=\"fav-wrapper\">\r\n              {showFav ? (\r\n                <FavouriteToggleLazy\r\n                  handle={router.query.handle as string}\r\n                  title={product.title}\r\n                  image={galleryImages[0]?.url || '/placeholder.png'}\r\n                  price={formattedPrice}\r\n                  metafields={metafields}\r\n                />\r\n              ) : (\r\n                <span className=\"fav-placeholder\" />\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"product-info\">\r\n  <h1 style={{ fontSize: '20px', fontWeight: 600, marginBottom: '4px' }}>\r\n    {product.title}\r\n  </h1>\r\n\r\n  <p\r\n    style={{\r\n      fontSize: '12px',\r\n      color: '#666',\r\n      marginTop: '10px',\r\n      marginBottom: '16px',\r\n      textAlign: 'left',\r\n      minHeight: 18,\r\n    }}\r\n  >\r\n    {selectedSku || ''}\r\n  </p>\r\n\r\n    {/* Price */}\r\n    <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n      <div\r\n        style={{\r\n          width: '80px',\r\n          height: '24px',\r\n          position: 'relative',\r\n        }}\r\n      >\r\n        <span\r\n          aria-live=\"polite\"\r\n          style={{\r\n            position: 'absolute',\r\n            top: 0,\r\n            left: 0,\r\n            fontSize: '14px',\r\n            fontWeight: 500,\r\n            lineHeight: '24px',\r\n          }}\r\n        >\r\n          ¬£{formattedPrice}\r\n        </span>\r\n      </div>\r\n    </div>\r\n\r\n  {/* Variant options (unchanged) */}\r\n  {variantOptions.length > 0 && (\r\n    <div style={{ marginTop: '24px' }}>\r\n      <p style={{ fontSize: '14px', fontWeight: 500, marginBottom: '8px' }}>\r\n        Available in:\r\n      </p>\r\n      <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>\r\n        {variantOptions.map((variant) => {\r\n          const isCurrent = variant.label === currentVariantLabel;\r\n          return isCurrent ? (\r\n            <span\r\n              key={variant.label}\r\n              style={{\r\n                padding: '8px 12px',\r\n                borderRadius: '5px',\r\n                background: '#181818',\r\n                color: '#fff',\r\n                fontSize: '14px',\r\n                fontWeight: 500,\r\n                border: '2px solid #181818',\r\n              }}\r\n            >\r\n              {variant.label}\r\n            </span>\r\n          ) : (\r\n            <Link\r\n              key={variant.url}\r\n              href={variant.url}\r\n              style={{\r\n                padding: '8px 12px',\r\n                borderRadius: '5px',\r\n                background: '#fff',\r\n                color: '#181818',\r\n                fontSize: '14px',\r\n                fontWeight: 500,\r\n                border: '1px solid #ccc',\r\n                textDecoration: 'none',\r\n                transition: 'all 0.2s',\r\n              }}\r\n            >\r\n              {variant.label}\r\n            </Link>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  )}\r\n\r\n  {/* Variant buttons (optional: disable OOS) */}\r\n  {product.variants?.edges?.length > 1 && (\r\n    <div className=\"variant-wrapper\">\r\n      <p className=\"variant-label\">Select an option:</p>\r\n      <div className=\"variant-grid\">\r\n        {product.variants.edges.map(({ node }) => {\r\n          const isSelected = selectedVariantId === node.id;\r\n          const oos = !node.availableForSale || (node.quantityAvailable ?? 0) <= 0;\r\n            return (\r\n              <button\r\n                key={node.id}\r\n                onClick={() => {\r\n                  setSelectedVariantId(node.id);\r\n                  setShowVariantImage(true);\r\n                }}\r\n                className={`variant-button${isSelected ? ' selected' : ''}${oos ? ' is-disabled' : ''}`}\r\n                disabled={oos}\r\n                aria-disabled={oos}\r\n                title={oos ? 'Sold out' : undefined}\r\n                aria-label={oos ? `${node.title} (Sold out)` : undefined}\r\n              >\r\n                {node.title}\r\n              </button>\r\n            );\r\n          })}\r\n      </div>\r\n    </div>\r\n  )}\r\n\r\n  {/* Quantity + Add to Cart */}\r\n  <div className=\"desktop-add-to-cart\" style={{ marginTop: '24px' }}>\r\n    <div style={{ display: 'flex', gap: '12px' }}>\r\n      <label htmlFor=\"qty\" style={{ position: 'absolute', left: '-9999px' }}>\r\n        Quantity\r\n      </label>\r\n\r\n      {/* Qty control */}\r\n      <div\r\n        style={{\r\n          flex: '0 0 120px',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          border: '1px solid #ccc',\r\n          borderRadius: '4px',\r\n          overflow: 'hidden',\r\n          paddingInline: '4px',\r\n        }}\r\n      >\r\n        <button\r\n          style={{\r\n            width: '48px',\r\n            height: '48px',\r\n            minWidth: '48px',\r\n            minHeight: '48px',\r\n            background: '#fff',\r\n            border: 'none',\r\n            fontSize: '20px',\r\n            cursor: 'pointer',\r\n          }}\r\n          onClick={() => setQty((prev) => Math.max(isSoldOut ? 0 : 1, prev - 1))}\r\n          disabled={isSoldOut}\r\n          aria-disabled={isSoldOut}\r\n        >\r\n          ‚àí\r\n        </button>\r\n        <span\r\n          id=\"qty\"\r\n          style={{\r\n            width: '100%',\r\n            height: '40px',\r\n            textAlign: 'center',\r\n            fontSize: '14px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            userSelect: 'none',\r\n          }}\r\n        >\r\n          {qty}\r\n        </span>\r\n        <button\r\n          style={{\r\n            width: '48px',\r\n            height: '48px',\r\n            minWidth: '48px',\r\n            minHeight: '48px',\r\n            fontSize: '20px',\r\n            background: '#fff',\r\n            border: 'none',\r\n            cursor: 'pointer',\r\n          }}\r\n          onClick={() => {\r\n            if (maxQty <= 0) { showToast('More coming soon üòâ'); return; }\r\n            if (qty >= maxQty) { showToast(`We only have ${maxQty} available. Sorry üòû`); return; }\r\n            setQty((prev) => prev + 1);\r\n          }}\r\n          disabled={isSoldOut}\r\n          aria-disabled={isSoldOut}\r\n        >\r\n          +\r\n        </button>\r\n      </div>\r\n\r\n      {/* CTA */}\r\n      <button\r\n        style={{\r\n          flex: '1',\r\n          height: '48px',\r\n          minHeight: '48px',\r\n          background: '#181818',\r\n          color: '#fff',\r\n          border: 'none',\r\n          fontSize: '14px',\r\n          fontWeight: 900,\r\n          cursor: 'pointer',\r\n          borderRadius: '4px',\r\n          whiteSpace: 'nowrap',\r\n        }}\r\n        onClick={() => {\r\n          if (isSoldOut) { showToast('SOLD OUT. More coming soon.'); return; }\r\n          if (!selectedVariantId || !selectedVariant) return;\r\n\r\n          addToCart(selectedVariantId, qty, {\r\n            handle: router.query.handle as string,\r\n            title: product.title,\r\n            variantTitle: selectedVariant.title,\r\n            selectedOptions: selectedVariant.selectedOptions,\r\n            price: selectedVariant.price.amount,\r\n            image: product.images?.edges?.[0]?.node?.url || undefined,\r\n            metafields: product.metafields,\r\n            quantityAvailable: selectedVariant.quantityAvailable,\r\n          });\r\n          openDrawer();\r\n        }}\r\n        disabled={isSoldOut}\r\n        aria-disabled={isSoldOut}\r\n      >\r\n        {isSoldOut ? 'SOLD OUT' : 'ADD TO BAG'}\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  {/* Details block (unchanged) */}\r\n  <div style={{ marginTop: '32px' }}>\r\n    <h2 style={{ fontSize: '16px', fontWeight: 600, marginBottom: '8px' }}>Details</h2>\r\n    <table\r\n      style={{\r\n        width: '100%',\r\n        borderCollapse: 'collapse',\r\n        fontSize: '14px',\r\n        border: '1px solid #e0e0e0',\r\n      }}\r\n    >\r\n      <tbody>\r\n        {Object.entries(fieldLabels).map(([key, label]) => {\r\n          const value = getFieldValue(key);\r\n          return value ? (\r\n            <tr key={key}>\r\n              <td style={cellLabelStyle}>{label.toUpperCase()}</td>\r\n              <td style={cellValueStyle}>{value}</td>\r\n            </tr>\r\n          ) : null;\r\n        })}\r\n      </tbody>\r\n    </table>\r\n\r\n    {product.descriptionHtml && (\r\n      <div\r\n        style={{ marginTop: '24px', fontSize: '14px', lineHeight: '1.6' }}\r\n        dangerouslySetInnerHTML={{ __html: product.descriptionHtml }}\r\n      />\r\n    )}\r\n  </div>\r\n</div>\r\n</div>\r\n\r\n        {/* ‚úÖ Styled By You (renders when near viewport) */}\r\n        <div\r\n          ref={sbyAnchorRef}\r\n          style={{ minHeight: showSBY ? undefined : '400px' }}\r\n        >\r\n          {showSBY ? <StyledByYouLazy items={ugcItems} /> : null}\r\n        </div>\r\n\r\n        <div style={{ height: '80px' }} />\r\n        \r\n      </main>\r\n\r\n    </>\r\n  );\r\n}\r\n\r\nexport const getStaticPaths: GetStaticPaths = async () => {\r\n  const query = `\r\n    {\r\n      products(first: 250) {\r\n        edges {\r\n          node {\r\n            handle\r\n          }\r\n        }\r\n      }\r\n    }\r\n  `;\r\n\r\n  const data = await shopifyFetch({ query });\r\n\r\n  const paths = data.products.edges.map(\r\n    ({ node }: { node: { handle: string } }) => ({\r\n      params: { handle: node.handle },\r\n    })\r\n  );\r\n\r\n  return {\r\n    paths,\r\n    fallback: 'blocking',\r\n  };\r\n};\r\n\r\nexport const getStaticProps: GetStaticProps<ProductPageProps> = async (\r\n  context: GetStaticPropsContext\r\n) => {\r\n  const handle = context.params?.handle;\r\n\r\n  const query = `\r\n  query ProductByHandle($handle: String!) {\r\n    productByHandle(handle: $handle) {\r\n      id\r\n      title\r\n      descriptionHtml\r\n      priceRange { minVariantPrice { amount } }\r\n\r\n      images(first: 5) {\r\n        edges {\r\n          node {\r\n            url(transform: { maxWidth: 1600, preferredContentType: WEBP })\r\n            width\r\n            height\r\n            altText\r\n          }\r\n        }\r\n      }\r\n\r\n      variants(first: 10) {\r\n        edges {\r\n          node {\r\n            id\r\n            title\r\n            price { amount }\r\n            availableForSale\r\n            quantityAvailable\r\n            selectedOptions { name value }\r\n            sku\r\n            image {\r\n              url\r\n              width\r\n              height\r\n              altText\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      metafields(identifiers: [\r\n        { namespace: \"custom\", key: \"alloy\" },\r\n        { namespace: \"custom\", key: \"metal\" },\r\n        { namespace: \"custom\", key: \"metal_colour\" },\r\n        { namespace: \"custom\", key: \"thread_type\" },\r\n        { namespace: \"custom\", key: \"gem_type\" },\r\n        { namespace: \"custom\", key: \"gem_colour\" },\r\n        { namespace: \"custom\", key: \"name\" },\r\n        { namespace: \"custom\", key: \"title\" },\r\n        { namespace: \"custom\", key: \"sku\" },\r\n        { namespace: \"custom\", key: \"width\" },\r\n        { namespace: \"custom\", key: \"height\" },\r\n        { namespace: \"custom\", key: \"length\" },\r\n        { namespace: \"custom\", key: \"gauge\" },\r\n        { namespace: \"custom\", key: \"sold_as\" },\r\n        { namespace: \"custom\", key: \"shipping\" },\r\n        { namespace: \"custom\", key: \"base_size\" },\r\n        { namespace: \"custom\", key: \"variants\" },\r\n        { namespace: \"custom\", key: \"variant_label\" },\r\n        { namespace: \"custom\", key: \"fitting\" }\r\n      ]) {\r\n        key\r\n        value\r\n      }\r\n\r\n      styledByYou: metafield(namespace: \"custom\", key: \"styled_by_you\") {\r\n        references(first: 50) {\r\n          edges {\r\n            node {\r\n              ... on Metaobject {\r\n                id\r\n                type\r\n                fields {\r\n                  key\r\n                  value\r\n                  reference {\r\n                    __typename\r\n                    ... on MediaImage {\r\n                      image {\r\n                        url(transform: { maxWidth: 1200, preferredContentType: WEBP })\r\n                        width\r\n                        height\r\n                        altText\r\n                      }\r\n                    }\r\n                    ... on Product { id }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\n  const data = await shopifyFetch({ query, variables: { handle } });\r\n\r\n  const ugcItems = mapStyledByYou(\r\n    data.productByHandle.styledByYou?.references?.edges ?? [],\r\n    data.productByHandle.id\r\n  );\r\n\r\n  return {\r\n    props: {\r\n      product: data.productByHandle,\r\n      ugcItems,\r\n    },\r\n    revalidate: 60,\r\n  };\r\n};\r\n"],"names":[],"mappings":"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"}}]
}