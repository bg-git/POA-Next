{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/POA%20Next/apps/storefront/src/components/BookingAuthModal.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useAuth } from '@/context/AuthContext';\r\n\r\ntype BookingAuthModalProps = {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onAuthSuccess: () => void;\r\n};\r\n\r\nconst BookingAuthModal: React.FC<BookingAuthModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onAuthSuccess,\r\n}) => {\r\n  const { signIn } = useAuth();\r\n  const [mode, setMode] = useState<'choose' | 'signin' | 'register'>('choose');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const handleSignIn = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setLoading(true);\r\n\r\n    try {\r\n      const result = await signIn(email, password);\r\n      if (result.success) {\r\n        setEmail('');\r\n        setPassword('');\r\n        setMode('choose');\r\n        onClose();\r\n        onAuthSuccess();\r\n      } else {\r\n        setError(result.error || 'Sign in failed');\r\n      }\r\n    } catch {\r\n      setError('An error occurred. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRegisterClick = () => {\r\n    // Open register page in a new tab or modal - for now redirect\r\n    window.open('/account?tab=register', '_blank');\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      background: 'rgba(0, 0, 0, 0.5)',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      zIndex: 1000,\r\n    }}>\r\n      <div style={{\r\n        background: '#fff',\r\n        padding: '40px 32px',\r\n        borderRadius: '0',\r\n        maxWidth: '500px',\r\n        width: '90%',\r\n        position: 'relative',\r\n      }}>\r\n        <button\r\n          type=\"button\"\r\n          aria-label=\"Close\"\r\n          onClick={onClose}\r\n          style={{\r\n            position: 'absolute',\r\n            top: '16px',\r\n            right: '16px',\r\n            background: 'none',\r\n            border: 'none',\r\n            fontSize: '28px',\r\n            cursor: 'pointer',\r\n            color: '#000',\r\n            padding: '0',\r\n            width: '40px',\r\n            height: '40px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n          }}\r\n        >\r\n          ×\r\n        </button>\r\n\r\n        {mode === 'choose' && (\r\n          <>\r\n            <h2 style={{\r\n              fontSize: '24px',\r\n              fontWeight: '700',\r\n              marginBottom: '12px',\r\n              textTransform: 'uppercase',\r\n              margin: '0 0 12px 0',\r\n            }}>\r\n              SIGN IN TO BOOK\r\n            </h2>\r\n\r\n            <p style={{\r\n              fontSize: '14px',\r\n              color: '#666',\r\n              marginBottom: '32px',\r\n              margin: '0 0 32px 0',\r\n            }}>\r\n              You need to be logged in to book an appointment. Sign in to your account or create a new one.\r\n            </p>\r\n\r\n            <div style={{\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              gap: '12px',\r\n            }}>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setMode('signin')}\r\n                style={{\r\n                  padding: '16px 24px',\r\n                  fontSize: '16px',\r\n                  fontWeight: '600',\r\n                  background: '#000',\r\n                  color: '#fff',\r\n                  border: 'none',\r\n                  borderRadius: '0',\r\n                  cursor: 'pointer',\r\n                  textTransform: 'uppercase',\r\n                  width: '100%',\r\n                }}\r\n              >\r\n                Sign In\r\n              </button>\r\n\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleRegisterClick}\r\n                style={{\r\n                  padding: '16px 24px',\r\n                  fontSize: '16px',\r\n                  fontWeight: '600',\r\n                  background: '#fff',\r\n                  color: '#000',\r\n                  border: '1px solid #000',\r\n                  borderRadius: '0',\r\n                  cursor: 'pointer',\r\n                  textTransform: 'uppercase',\r\n                  width: '100%',\r\n                }}\r\n              >\r\n                Create Account\r\n              </button>\r\n            </div>\r\n\r\n            <p style={{\r\n              fontSize: '12px',\r\n              color: '#999',\r\n              marginTop: '24px',\r\n              textAlign: 'center',\r\n              margin: '24px 0 0 0',\r\n            }}>\r\n              Your booking will be saved to your account and a draft order will be created in Shopify.\r\n            </p>\r\n          </>\r\n        )}\r\n\r\n        {mode === 'signin' && (\r\n          <>\r\n            <h2 style={{\r\n              fontSize: '24px',\r\n              fontWeight: '700',\r\n              marginBottom: '24px',\r\n              textTransform: 'uppercase',\r\n              margin: '0 0 24px 0',\r\n            }}>\r\n              SIGN IN\r\n            </h2>\r\n\r\n            <form onSubmit={handleSignIn} style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '14px',\r\n                  fontWeight: '600',\r\n                  marginBottom: '8px',\r\n                  textTransform: 'uppercase',\r\n                }}>\r\n                  Email\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  required\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '12px',\r\n                    fontSize: '14px',\r\n                    border: '1px solid #ddd',\r\n                    borderRadius: '0',\r\n                    boxSizing: 'border-box',\r\n                    fontFamily: 'inherit',\r\n                  }}\r\n                  placeholder=\"your@email.com\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '14px',\r\n                  fontWeight: '600',\r\n                  marginBottom: '8px',\r\n                  textTransform: 'uppercase',\r\n                }}>\r\n                  Password\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  required\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '12px',\r\n                    fontSize: '14px',\r\n                    border: '1px solid #ddd',\r\n                    borderRadius: '0',\r\n                    boxSizing: 'border-box',\r\n                    fontFamily: 'inherit',\r\n                  }}\r\n                  placeholder=\"••••••••\"\r\n                />\r\n              </div>\r\n\r\n              {error && (\r\n                <div style={{\r\n                  padding: '12px',\r\n                  background: '#fee',\r\n                  color: '#c00',\r\n                  fontSize: '13px',\r\n                  borderRadius: '0',\r\n                }}>\r\n                  {error}\r\n                </div>\r\n              )}\r\n\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                style={{\r\n                  padding: '16px 24px',\r\n                  fontSize: '16px',\r\n                  fontWeight: '700',\r\n                  background: '#000',\r\n                  color: '#fff',\r\n                  border: 'none',\r\n                  borderRadius: '0',\r\n                  cursor: loading ? 'not-allowed' : 'pointer',\r\n                  textTransform: 'uppercase',\r\n                  width: '100%',\r\n                  opacity: loading ? 0.7 : 1,\r\n                }}\r\n              >\r\n                {loading ? 'Signing In...' : 'Sign In'}\r\n              </button>\r\n            </form>\r\n\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setMode('choose')}\r\n              style={{\r\n                marginTop: '16px',\r\n                padding: '12px 24px',\r\n                background: 'none',\r\n                border: 'none',\r\n                color: '#666',\r\n                cursor: 'pointer',\r\n                fontSize: '14px',\r\n                width: '100%',\r\n              }}\r\n            >\r\n              ← Back\r\n            </button>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookingAuthModal;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 384, "column": 0}, "map": {"version":3,"sources":["file:///C:/POA%20Next/apps/storefront/src/pages/book-a-piercing/%5Blocation%5D.tsx"],"sourcesContent":["import Head from 'next/head';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/router';\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport BookingAuthModal from '@/components/BookingAuthModal';\r\nimport { useAuth } from '@/context/AuthContext';\r\n\r\ninterface TimeSlot {\r\n  start_time: string;\r\n  formatedTime: string;\r\n  slots: number;\r\n}\r\n\r\ninterface Availability {\r\n  date: string;\r\n  available: boolean;\r\n  spots: TimeSlot[];\r\n}\r\n\r\nconst BookAPiercing = () => {\r\n  const router = useRouter();\r\n  const { location, reschedule } = router.query;\r\n  const { isAuthenticated, user, loading: authLoading } = useAuth();\r\n  const rescheduleBookingId = reschedule as string | undefined;\r\n  const isRescheduleMode = !!rescheduleBookingId;\r\n  const [showAuthModal, setShowAuthModal] = useState(false);\r\n  const [isClient, setIsClient] = useState(false);\r\n  const [attemptedDate, setAttemptedDate] = useState<string | null>(null);\r\n  const [selectedDate, setSelectedDate] = useState<string | null>(null);\r\n  const [selectedTime, setSelectedTime] = useState<string | null>(null);\r\n  const [availableTimes, setAvailableTimes] = useState<TimeSlot[]>([]);\r\n  const [availabilities, setAvailabilities] = useState<Availability[]>([]);\r\n  const [agreeToTos, setAgreeToTos] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isBooked, setIsBooked] = useState(false);\r\n  const [bookedTime, setBookedTime] = useState<string | null>(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [currentMonth, setCurrentMonth] = useState<Date | null>(null);\r\n\r\n  // Initialize on client side only to prevent hydration issues\r\n  useEffect(() => {\r\n    setIsClient(true);\r\n  }, []);\r\n\r\n  // Initialize currentMonth on client side only\r\n  useEffect(() => {\r\n    if (currentMonth === null && isClient) {\r\n      setCurrentMonth(new Date());\r\n    }\r\n  }, [isClient, currentMonth]);\r\n\r\n  const locationTitle = location === 'chesterfield' \r\n    ? 'Chesterfield' \r\n    : location === 'leicester' \r\n    ? 'Leicester' \r\n    : 'Booking';\r\n\r\n  const locationMap = {\r\n    chesterfield: { \r\n      name: 'Chester',\r\n      address: '3 Knifesmithgate', \r\n      city: 'Chesterfield', \r\n      postcode: 'S40 1RF', \r\n      phone: '+44 (0) 1246 555555' \r\n    },\r\n    leicester: { \r\n      name: 'Leicester',\r\n      address: '8 Silver Walk, St Martins Square', \r\n      city: 'Leicester', \r\n      postcode: 'LE1 5EW', \r\n      phone: '+44 (0) 116 507 0400' \r\n    }\r\n  };\r\n\r\n  const locationData = location ? locationMap[location as keyof typeof locationMap] : null;\r\n\r\n  // Mock data - replace with API call\r\n  const generateMockAvailabilities = () => {\r\n    const availabilities: Availability[] = [];\r\n    const today = new Date();\r\n    \r\n    for (let i = 0; i < 30; i++) {\r\n      const date = new Date(today);\r\n      date.setDate(date.getDate() + i);\r\n      if (date.getDay() === 0) continue; // Skip Sundays\r\n      \r\n      const dateStr = date.toISOString().split('T')[0];\r\n      const timeSlots: TimeSlot[] = [\r\n        { start_time: '09:00 AM', formatedTime: '9:00 AM', slots: 2 },\r\n        { start_time: '10:00 AM', formatedTime: '10:00 AM', slots: 2 },\r\n        { start_time: '11:00 AM', formatedTime: '11:00 AM', slots: i % 2 === 0 ? 1 : 2 },\r\n        { start_time: '02:00 PM', formatedTime: '2:00 PM', slots: 2 },\r\n        { start_time: '03:00 PM', formatedTime: '3:00 PM', slots: 2 },\r\n        { start_time: '04:00 PM', formatedTime: '4:00 PM', slots: i % 3 === 0 ? 0 : 1 },\r\n      ];\r\n      \r\n      availabilities.push({\r\n        date: dateStr,\r\n        available: timeSlots.some(t => t.slots > 0),\r\n        spots: timeSlots\r\n      });\r\n    }\r\n    \r\n    return availabilities;\r\n  };\r\n\r\n  const handleAuthSuccess = useCallback(() => {\r\n    // After successful authentication, auto-select the date they tried to click\r\n    if (attemptedDate) {\r\n      setSelectedDate(attemptedDate);\r\n      setAttemptedDate(null);\r\n    }\r\n  }, [attemptedDate]);\r\n\r\n  // Initialize availabilities from API on mount\r\n  useEffect(() => {\r\n    const fetchAvailabilities = async () => {\r\n      if (!location) return;\r\n      try {\r\n        const response = await fetch(`/api/booking/availability?location=${location}`);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setAvailabilities(data.availabilities || []);\r\n        } else {\r\n          console.error('Failed to fetch availabilities');\r\n          // Fallback to mock data\r\n          setAvailabilities(generateMockAvailabilities());\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching availabilities:', error);\r\n        // Fallback to mock data\r\n        setAvailabilities(generateMockAvailabilities());\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchAvailabilities();\r\n  }, [location]);\r\n\r\n  // Update available times when date is selected\r\n  useEffect(() => {\r\n    if (selectedDate) {\r\n      const availability = availabilities.find((a) => a.date === selectedDate);\r\n      if (availability) {\r\n        setAvailableTimes(availability.spots.filter((t) => t.slots > 0));\r\n        setSelectedTime(null);\r\n      }\r\n    }\r\n  }, [selectedDate, availabilities]);\r\n\r\n  // Auto-select the attempted date after successful authentication\r\n  useEffect(() => {\r\n    if (isClient && isAuthenticated && user?.id && attemptedDate) {\r\n      handleAuthSuccess();\r\n    }\r\n  }, [isClient, isAuthenticated, user?.id, attemptedDate, handleAuthSuccess]);\r\n\r\n  const getDaysInMonth = (date: Date) => {\r\n    return new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\r\n  };\r\n\r\n  const getFirstDayOfMonth = (date: Date) => {\r\n    return new Date(date.getFullYear(), date.getMonth(), 1).getDay();\r\n  };\r\n\r\n  const renderCalendar = () => {\r\n    if (!currentMonth) return [];\r\n    const daysInMonth = getDaysInMonth(currentMonth);\r\n    const firstDay = getFirstDayOfMonth(currentMonth);\r\n    const days: JSX.Element[] = [];\r\n    const today = new Date();\r\n    const todayDate = today.getDate();\r\n    const currentMonthNum = today.getMonth();\r\n    const currentYear = today.getFullYear();\r\n\r\n    // Empty cells for days before the first day of month\r\n    for (let i = 0; i < firstDay; i++) {\r\n      days.push(<div key={`empty-${i}`}></div>);\r\n    }\r\n\r\n    // Days of the month\r\n    for (let day = 1; day <= daysInMonth; day++) {\r\n      const date = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), day);\r\n      const dateStr = date.toISOString().split('T')[0];\r\n      const availability = availabilities.find((a) => a.date === dateStr);\r\n      const isToday = (day === todayDate && \r\n                       currentMonth.getMonth() === currentMonthNum && \r\n                       currentMonth.getFullYear() === currentYear);\r\n      const isPastDate = date < today;\r\n      const isSunday = date.getDay() === 0;\r\n      const isSelected = selectedDate === dateStr;\r\n      const hasAvailability = availability && availability.available && !isPastDate && !isSunday;\r\n\r\n      days.push(\r\n        <button\r\n          key={dateStr}\r\n          onClick={() => !authLoading && hasAvailability && handleDateClick(dateStr)}\r\n          disabled={!hasAvailability || authLoading}\r\n          style={{\r\n            padding: '12px',\r\n            fontSize: '14px',\r\n            fontWeight: isToday ? '700' : '500',\r\n            border: isSelected ? 'none' : '1px solid #ddd',\r\n            borderRadius: '4px',\r\n            background: isSelected \r\n              ? '#000'\r\n              : isToday\r\n              ? '#f0f0f0'\r\n              : '#fff',\r\n            color: isSelected ? '#fff' : '#000',\r\n            cursor: (hasAvailability && !authLoading) ? 'pointer' : 'not-allowed',\r\n            opacity: (!hasAvailability || authLoading) ? 0.5 : 1,\r\n            transition: 'all 0.2s'\r\n          }}\r\n        >\r\n          {day}\r\n        </button>\r\n      );\r\n    }\r\n\r\n    return days;\r\n  };\r\n\r\n  const handleDateClick = (dateStr: string) => {\r\n    // Wait for auth to load, then check if user is authenticated\r\n    if (!isClient || authLoading) {\r\n      return;\r\n    }\r\n    \r\n    // Check if user is authenticated AND has user data\r\n    const isReallyAuthenticated = isAuthenticated && !!user?.id;\r\n    \r\n    if (!isReallyAuthenticated) {\r\n      // Store the date they tried to click and show auth modal\r\n      setAttemptedDate(dateStr);\r\n      setShowAuthModal(true);\r\n      return;\r\n    }\r\n    // User is authenticated, select the date\r\n    setSelectedDate(dateStr);\r\n  };\r\n\r\n  const formatBookingTime = (dateStr: string, timeStr: string) => {\r\n    const date = new Date(dateStr + 'T00:00:00');\r\n    const [time, period] = timeStr.split(' ');\r\n    const [hours, mins] = time.split(':').map(Number);\r\n    \r\n    const adjustedHours = period === 'PM' && hours !== 12 ? hours + 12 : (period === 'AM' && hours === 12 ? 0 : hours);\r\n    date.setHours(adjustedHours, mins);\r\n    \r\n    const day = date.getDate();\r\n    const month = date.getMonth() + 1;\r\n    const year = date.getFullYear();\r\n    \r\n    const dateFormatted = `${day}/${month}/${year}`;\r\n    return `${dateFormatted} ${timeStr}`;\r\n  };\r\n\r\n  const handleConfirmBooking = async () => {\r\n    if (!selectedDate || !selectedTime || !agreeToTos) {\r\n      alert('Please select a date, time, and accept terms & conditions');\r\n      return;\r\n    }\r\n\r\n    if (!user?.id) {\r\n      alert('You must be logged in to confirm a booking');\r\n      return;\r\n    }\r\n    \r\n    setIsLoading(true);\r\n    \r\n    try {\r\n      // Determine which endpoint to use based on mode\r\n      const endpoint = isRescheduleMode ? '/api/booking/reschedule' : '/api/booking/confirm';\r\n      const payload = isRescheduleMode \r\n        ? {\r\n            bookingId: rescheduleBookingId,\r\n            location,\r\n            date: selectedDate,\r\n            time: selectedTime,\r\n          }\r\n        : {\r\n            location,\r\n            date: selectedDate,\r\n            time: selectedTime,\r\n            email: user.email || '',\r\n            firstName: user.firstName || 'Guest',\r\n            lastName: user.lastName || '',\r\n            customerId: user.id,\r\n          };\r\n\r\n      const response = await fetch(endpoint, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(payload),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        if (isRescheduleMode) {\r\n          // Reschedule successful - redirect to account page\r\n          alert('Appointment rescheduled successfully');\r\n          router.push('/account');\r\n        } else {\r\n          // New booking - redirect to checkout\r\n          if (data.checkoutUrl) {\r\n            window.location.href = data.checkoutUrl;\r\n          } else {\r\n            alert(`Booking confirmed for ${formatBookingTime(selectedDate, selectedTime)}`);\r\n            setIsBooked(true);\r\n            setBookedTime(formatBookingTime(selectedDate, selectedTime));\r\n            setSelectedDate(null);\r\n            setSelectedTime(null);\r\n            setAgreeToTos(false);\r\n          }\r\n        }\r\n      } else {\r\n        const errorDetails = data.details ? ` (${data.details})` : '';\r\n        alert(`${isRescheduleMode ? 'Reschedule' : 'Booking'} failed: ${data.error}${errorDetails}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Booking error:', error);\r\n      alert('Error confirming booking. Please try again.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',\r\n    'July', 'August', 'September', 'October', 'November', 'December'];\r\n  const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n\r\n  if (loading) {\r\n    return (\r\n      <main style={{ maxWidth: '1200px', margin: '0 auto', padding: '40px 24px' }}>\r\n        <Head>\r\n          <title>{`Book a Piercing - ${locationTitle} | Pierce of Art`}</title>\r\n        </Head>\r\n        <div style={{ textAlign: 'center', padding: '40px' }}>Loading availability...</div>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Head>\r\n        <title>{`Book a Piercing - ${locationTitle} | Pierce of Art`}</title>\r\n        <meta name=\"description\" content={`Book your piercing appointment at Pierce of Art ${locationTitle}`} />\r\n      </Head>\r\n\r\n      <BookingAuthModal\r\n        isOpen={showAuthModal}\r\n        onClose={() => setShowAuthModal(false)}\r\n        onAuthSuccess={handleAuthSuccess}\r\n      />\r\n\r\n      <main style={{ maxWidth: '1200px', margin: '0 auto', padding: '40px 24px' }}>\r\n        <div style={{ textAlign: 'left', marginBottom: '40px' }}>\r\n          <h1 style={{ fontSize: '32px', fontWeight: '700', marginBottom: '8px', textTransform: 'uppercase' }}>\r\n            {isRescheduleMode ? 'RESCHEDULE APPOINTMENT' : isBooked ? 'RE-SCHEDULE' : 'PRIORITY BOOKING'}\r\n          </h1>\r\n          <h3 style={{ fontSize: '24px', fontWeight: '600' }}>\r\n            {locationTitle}\r\n          </h3>\r\n        </div>\r\n\r\n        {isRescheduleMode && (\r\n          <div style={{\r\n            background: '#e8f4f8',\r\n            padding: '20px 24px',\r\n            marginBottom: '32px',\r\n            borderRadius: '4px',\r\n            borderLeft: '4px solid #03cb91'\r\n          }}>\r\n            <p style={{ margin: '0' }}>\r\n              <strong>Select a new date and time for your appointment.</strong> No checkout required - your appointment will be updated immediately.\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {isBooked && !isRescheduleMode && (\r\n          <div style={{\r\n            background: '#f0f0f0',\r\n            padding: '20px 24px',\r\n            marginBottom: '32px',\r\n            borderRadius: '4px'\r\n          }}>\r\n            <p style={{ margin: '0 0 8px 0' }}>\r\n              <strong>You&apos;ve already got a piercing booked for {bookedTime}</strong>\r\n            </p>\r\n            <p style={{ margin: '0 0 8px 0' }}>Don&apos;t worry though. You can have more than 1 piercing when you arrive.</p>\r\n            <p style={{ margin: 0 }}>If you&apos;re trying to book for a friend, they will need to book separately.</p>\r\n          </div>\r\n        )}\r\n\r\n        {!isBooked && (\r\n          <div style={{\r\n            background: '#f9f9f9',\r\n            padding: '40px 24px',\r\n            borderRadius: '8px'\r\n          }}>\r\n            {/* Calendar Section */}\r\n            {currentMonth && (\r\n            <div style={{ marginBottom: '40px' }}>\r\n              <label style={{ display: 'block', fontSize: '14px', fontWeight: '600', marginBottom: '20px', textTransform: 'uppercase' }}>\r\n                SELECT DATE\r\n              </label>\r\n\r\n              <div style={{\r\n                background: '#fff',\r\n                padding: '24px',\r\n                borderRadius: '4px',\r\n                border: '1px solid #ddd'\r\n              }}>\r\n                {/* Month Navigation */}\r\n                <div style={{\r\n                  display: 'flex',\r\n                  justifyContent: 'space-between',\r\n                  alignItems: 'center',\r\n                  marginBottom: '24px'\r\n                }}>\r\n                  <button\r\n                    onClick={() => currentMonth && setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1))}\r\n                    style={{\r\n                      background: 'none',\r\n                      border: 'none',\r\n                      fontSize: '18px',\r\n                      cursor: 'pointer',\r\n                      color: '#03cb91'\r\n                    }}\r\n                  >\r\n                    ← Prev\r\n                  </button>\r\n                  <h3 style={{ fontSize: '18px', fontWeight: '600', margin: 0 }}>\r\n                    {monthNames[currentMonth.getMonth()]} {currentMonth.getFullYear()}\r\n                  </h3>\r\n                  <button\r\n                    onClick={() => currentMonth && setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1))}\r\n                    style={{\r\n                      background: 'none',\r\n                      border: 'none',\r\n                      fontSize: '18px',\r\n                      cursor: 'pointer',\r\n                      color: '#03cb91'\r\n                    }}\r\n                  >\r\n                    Next →\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Day Headers */}\r\n                <div style={{\r\n                  display: 'grid',\r\n                  gridTemplateColumns: 'repeat(7, 1fr)',\r\n                  gap: '8px',\r\n                  marginBottom: '12px'\r\n                }}>\r\n                  {dayNames.map((day) => (\r\n                    <div\r\n                      key={day}\r\n                      style={{\r\n                        textAlign: 'center',\r\n                        fontWeight: '600',\r\n                        fontSize: '12px',\r\n                        padding: '8px',\r\n                        color: '#666'\r\n                      }}\r\n                    >\r\n                      {day}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                {/* Calendar Days */}\r\n                <div style={{\r\n                  display: 'grid',\r\n                  gridTemplateColumns: 'repeat(7, 1fr)',\r\n                  gap: '8px'\r\n                }}>\r\n                  {renderCalendar()}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            )}\r\n\r\n            {/* Time Picker Section */}\r\n            {selectedDate && (\r\n              <div style={{ marginBottom: '40px' }}>\r\n                <label style={{ display: 'block', fontSize: '14px', fontWeight: '600', marginBottom: '20px', textTransform: 'uppercase' }}>\r\n                  SELECT TIME\r\n                </label>\r\n                <div style={{\r\n                  display: 'grid',\r\n                  gridTemplateColumns: 'repeat(auto-fit, minmax(140px, 1fr))',\r\n                  gap: '12px'\r\n                }}>\r\n                  {availableTimes.length > 0 ? (\r\n                    availableTimes.map((time) => (\r\n                      <button\r\n                        key={time.start_time}\r\n                        onClick={() => setSelectedTime(time.start_time)}\r\n                        style={{\r\n                          padding: '16px 12px',\r\n                          fontSize: '14px',\r\n                          fontWeight: '600',\r\n                          border: selectedTime === time.start_time ? 'none' : '1px solid #ddd',\r\n                          borderRadius: '4px',\r\n                          background: selectedTime === time.start_time \r\n                            ? '#000'\r\n                            : '#fff',\r\n                          color: selectedTime === time.start_time ? '#fff' : '#000',\r\n                          cursor: 'pointer',\r\n                          transition: 'all 0.2s'\r\n                        }}\r\n                      >\r\n                        <div>{time.formatedTime}</div>\r\n                        <div style={{ fontSize: '12px', marginTop: '4px', opacity: 0.8 }}>\r\n                          {time.slots} slot{time.slots > 1 ? 's' : ''}\r\n                        </div>\r\n                      </button>\r\n                    ))\r\n                  ) : (\r\n                    <div style={{ padding: '20px', color: '#999', gridColumn: '1 / -1' }}>\r\n                      No available times for this date\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Terms & Conditions */}\r\n            {selectedTime && (\r\n              <div style={{ marginBottom: '24px' }}>\r\n                <label style={{ display: 'flex', alignItems: 'center', gap: '12px', cursor: 'pointer' }}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={agreeToTos}\r\n                    onChange={(e) => setAgreeToTos(e.target.checked)}\r\n                    style={{ cursor: 'pointer', width: '20px', height: '20px' }}\r\n                  />\r\n                  <span style={{ fontSize: '14px' }}>\r\n                    I agree to the <Link href=\"/information/terms-of-service\" style={{ color: '#000', textDecoration: 'underline' }}>terms &amp; conditions</Link>\r\n                  </span>\r\n                </label>\r\n              </div>\r\n            )}\r\n\r\n            {/* Location Info */}\r\n            <div style={{\r\n              marginTop: '40px',\r\n              padding: '24px',\r\n              background: '#fff',\r\n              borderRadius: '4px'\r\n            }}>\r\n              <h3 style={{ fontSize: '16px', fontWeight: '600', marginBottom: '12px' }}>\r\n                {locationTitle} Location\r\n              </h3>\r\n              <p style={{ fontSize: '14px', color: '#666', lineHeight: '1.6', margin: 0 }}>\r\n                {locationData?.address}<br />\r\n                {locationData?.city}<br />\r\n                {locationData?.postcode}<br />\r\n                <br />\r\n                <strong>Phone:</strong> <a href={`tel:${locationData?.phone.replace(/\\s/g, '')}`} style={{ color: '#000' }}>{locationData?.phone}</a>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Confirm Button */}\r\n        {selectedTime && (\r\n          <div style={{\r\n            position: 'fixed',\r\n            bottom: 0,\r\n            left: 0,\r\n            right: 0,\r\n            background: '#181818',\r\n            padding: '16px 24px',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            gap: '12px',\r\n            zIndex: 100\r\n          }}>\r\n            <div style={{\r\n              background: '#fff',\r\n              color: '#000',\r\n              padding: '12px',\r\n              textAlign: 'center',\r\n              fontSize: '16px',\r\n              fontWeight: '600',\r\n              borderRadius: '0'\r\n            }}>\r\n              MY BOOKING: {new Date(selectedDate + 'T00:00:00').toLocaleDateString()} {selectedTime}\r\n            </div>\r\n            <button\r\n              onClick={handleConfirmBooking}\r\n              disabled={!agreeToTos || isLoading}\r\n              style={{\r\n                padding: '16px 24px',\r\n                fontSize: '16px',\r\n                fontWeight: '700',\r\n                background: agreeToTos ? '#000' : '#ccc',\r\n                color: '#fff',\r\n                border: 'none',\r\n                borderRadius: '0',\r\n                cursor: agreeToTos ? 'pointer' : 'not-allowed',\r\n                textTransform: 'uppercase',\r\n                width: '100%',\r\n                opacity: isLoading ? 0.7 : 1\r\n              }}\r\n              title=\"You must agree to terms & conditions to proceed\"\r\n            >\r\n              {isLoading ? 'Processing...' : 'Confirm Booking & Proceed to Checkout (Terms Accepted)'}\r\n            </button>\r\n          </div>\r\n        )}\r\n      </main>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BookAPiercing;"],"names":[],"mappings":"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"}}]
}